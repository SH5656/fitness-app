<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Fitness App</title>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Segoe UI, Arial, sans-serif;
  background:#eef6ef;
  padding:16px;
}

/* App container */
.app{
  max-width:460px;
  margin:auto;
  background:#ffffff;
  border-radius:18px;
  padding:16px;
  box-shadow:0 10px 30px rgba(0,0,0,0.15);
}

/* Header */
.header{
  display:flex;
  align-items:center;
  gap:12px;
  margin-bottom:14px;
}
.header img{
  width:52px;
  height:52px;
  border-radius:50%;
  object-fit:cover;
  background:#ddd;
}
.header h2{
  margin:0;
  font-size:20px;
}

/* Buttons */
button{
  width:100%;
  padding:12px;
  margin:8px 0;
  border:none;
  border-radius:12px;
  background:#2ecc71;
  color:#fff;
  font-size:16px;
}

/* Sections */
.section{
  background:#f7f7f7;
  padding:14px;
  border-radius:14px;
  margin-top:14px;
}
.section h3{
  margin:0 0 10px;
  font-size:17px;
}

/* Habits */
label{
  display:flex;
  align-items:center;
  gap:10px;
  margin:8px 0;
  font-size:16px;
}

/* Inputs */
input[type="text"]{
  width:100%;
  padding:10px;
  border-radius:10px;
  border:1px solid #ccc;
  margin-top:6px;
}
input[type="file"]{
  margin-top:6px;
}

/* Chart */
canvas{
  width:100% !important;
  height:220px !important;
}
</style>
</head>

<body>

<div class="app">

  <!-- HEADER -->
  <div class="header">
    <img id="profilePic" src="" alt="User">
    <div>
      <h2 id="userNameText">My Fitness App</h2>
      <input type="text" id="userNameInput" placeholder="Enter your name">
    </div>
  </div>

  <input type="file" id="photoInput" accept="image/*">

  <button onclick="saveProfile()">Save Profile</button>

  <button onclick="enableSound()">ðŸ”Š Enable Sound</button>

  <!-- HABITS -->
  <div class="section">
    <h3>âœ… Today Habits</h3>
    <label><input type="checkbox" onchange="tick()"> Exercise</label>
    <label><input type="checkbox" onchange="tick()"> Running</label>
    <label><input type="checkbox" onchange="tick()"> Study</label>
  </div>

  <!-- CHART -->
  <div class="section">
    <h3>ðŸ“Š Monthly Progress</h3>
    <canvas id="chart"></canvas>
  </div>

</div>

<!-- Tick Sound -->
<audio id="tickSound" preload="auto">
  <source src="https://assets.mixkit.co/sfx/preview/mixkit-click-1124.mp3">
</audio>

<script>
/* ---------- PROFILE ---------- */
const nameInput = document.getElementById("userNameInput");
const nameText = document.getElementById("userNameText");
const profilePic = document.getElementById("profilePic");

function saveProfile(){
  const name = nameInput.value.trim();
  if(name){
    localStorage.setItem("userName", name);
    nameText.innerText = "ðŸ‘¤ " + name;
  }

  const file = document.getElementById("photoInput").files[0];
  if(file){
    const reader = new FileReader();
    reader.onload = () => {
      localStorage.setItem("profilePic", reader.result);
      profilePic.src = reader.result;
    };
    reader.readAsDataURL(file);
  }
}

function loadProfile(){
  const savedName = localStorage.getItem("userName");
  const savedPic = localStorage.getItem("profilePic");
  if(savedName) nameText.innerText = "ðŸ‘¤ " + savedName;
  if(savedPic) profilePic.src = savedPic;
}
loadProfile();

/* ---------- SOUND ---------- */
let soundEnabled = false;
const sound = document.getElementById("tickSound");

function enableSound(){
  sound.play().then(()=>{
    sound.pause();
    sound.currentTime = 0;
    soundEnabled = true;
    alert("Sound enabled âœ…");
  });
}

/* ---------- HABITS + DATA ---------- */
function tick(){
  if(soundEnabled){
    sound.currentTime = 0;
    sound.play();
  }

  const day = new Date().getDate();
  let count = parseInt(localStorage.getItem("day_"+day) || 0);
  localStorage.setItem("day_"+day, count + 1);
  loadChart();
}

/* ---------- CHART ---------- */
let chart;

function loadChart(){
  const daysInMonth = new Date(
    new Date().getFullYear(),
    new Date().getMonth()+1,
    0
  ).getDate();

  const labels = [];
  const data = [];

  for(let d=1; d<=daysInMonth; d++){
    labels.push(d);
    let v = parseInt(localStorage.getItem("day_"+d) || 0);
    data.push(Math.min(v * 33, 100)); // % logic
  }

  if(chart) chart.destroy();

  chart = new Chart(document.getElementById("chart"),{
    type:"line",
    data:{
      labels: labels,
      datasets:[{
        label:"Progress %",
        data: data,
        borderColor:"#2ecc71",
        backgroundColor:"rgba(46,204,113,0.15)",
        tension:0.4,
        fill:true,
        pointRadius:4
      }]
    },
    options:{
      scales:{
        y:{min:0,max:100}
      },
      plugins:{
        legend:{display:false}
      }
    }
  });
}

loadChart();
</script>

</body>
</html>
