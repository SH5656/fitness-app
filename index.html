<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Daily Fitness</title>

<style>
*{box-sizing:border-box;transition:0.25s}

/* BEST FONT */
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

:root{
  --bg:#e8f5e9; --card:#fff;
  --accent:#2ecc71; --hover:#27ae60; --text:#000;
}

/* DARK MODE */
body.dark{
  --bg:#1c1c1e; --card:#2c2c2e;
  --accent:#9dfc5c; --hover:#6ae645; --text:#fff;
}

body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:'Poppins',sans-serif;
  padding:12px;
}

/* APP CONTAINER */
.app{
  max-width:500px;margin:auto;
  background:var(--card);
  padding:18px;border-radius:18px;
  box-shadow:0 10px 25px rgba(0,0,0,.25)
}

/* TITLE */
#appTitle{
  text-align:center;
  font-size:26px;
  font-weight:600;
  color:var(--accent);
  margin-bottom:12px;
}

/* BUTTON */
button{
  width:100%;padding:10px;margin:6px 0;
  font-size:16px;border-radius:10px;border:none;
  background:var(--accent);color:var(--text);cursor:pointer;
}
button:hover{background:var(--hover);transform:translateY(-2px)}
button:active{transform:scale(.92)}

/* PROFILE */
.profile{display:flex;align-items:center;gap:12px;margin-bottom:10px}
.profile img{
  width:65px;height:65px;border-radius:50%;
  object-fit:cover;background:#aaa
}

/* CARDS */
.card{
  background:var(--card);border:2px solid var(--accent);
  padding:12px;border-radius:14px;
  margin-top:12px;
  box-shadow:0 4px 10px rgba(0,0,0,.15)
}
.card-title{
  font-weight:600;color:var(--accent);text-align:center;
  text-transform:uppercase;font-size:14px;margin-bottom:6px;
}

/* TABLE */
.table-wrap{overflow-x:auto;margin-top:10px}
table{width:100%;border-collapse:collapse;font-size:13px;min-width:720px}
th,td{border:1px solid #ccc;padding:6px;text-align:center}
th{background:#e7e7e7;color:#000}
body.dark th{background:#444;color:#fff}
.today{background:#fff4a8}
body.dark .today{background:#4d4b2c}
td:hover{background:#d7ffd7}
body.dark td:hover{background:#334c2f}

/* MUSIC UI */
.music-controls{display:flex;gap:8px;justify-content:center;margin:6px 0}
.music-controls button{
 width:auto;padding:8px 12px;font-size:18px;border-radius:50%
}
#songName{text-align:center;font-weight:bold;color:var(--accent)}
</style>
</head>

<body>

<div class="app">
<div id="appTitle">My Daily Fitness</div>

<!-- PROFILE -->
<div class="profile">
<img id="profilePic">
<div>
  <div id="userNameShow">üë§ Your Name</div>
  <div id="streakShow">üî• Streak: 0</div>
  <div id="statsShow">üíß0 | ‚öñÔ∏è0</div>
</div>
</div>

<input type="text" id="userName" placeholder="Enter name">
<input type="file" id="photoInput" accept="image/*">
<button onclick="saveProfile()">Save Profile</button>

<!-- MUSIC -->
<div class="card">
<div class="card-title">üéß Music Player</div>
<div id="songName"></div>
<div class="music-controls">
<button onclick="prevSong()">‚èÆ</button>
<button onclick="toggleMusic()">‚èØ</button>
<button onclick="nextSong()">‚è≠</button>
</div>
<input type="range" id="volumeControl" min="0" max="1" step="0.05" oninput="changeVolume(this.value)">
<button onclick="toggleLoop()">üîÅ Loop: Off</button>
</div>

<button onclick="editHabits()">‚úèÔ∏è Edit Habits</button>
<div id="habitEditor" class="card" style="display:none"></div>

<button onclick="unlockSound()">üîä Enable Tick Sound</button>
<button onclick="toggleDark()">üåô Dark Mode</button>

<h2 id="monthYear"></h2>
<h3 id="weekTitle"></h3>
<div style="display:flex;gap:6px">
<button onclick="changeWeek(-1)">‚¨Ö Prev</button>
<button onclick="changeWeek(1)">Next ‚û°</button>
</div>

<div class="table-wrap card">
<table><thead><tr id="habitHeadRow"></tr></thead>
<tbody id="chartBody"></tbody></table></div>

<!-- WATER -->
<div class="card">
<div class="card-title">üíß WATER TRACKER</div>
<input type="number" id="water">
<button onclick="saveWater()">Save</button>
</div>

<!-- WEIGHT -->
<div class="card">
<div class="card-title">‚öñÔ∏è WEIGHT TRACKER</div>
<input type="number" step="0.1" id="weight">
<button onclick="saveWeight()">Save</button>
</div>

<!-- ALARM BELOW WEIGHT ‚úî -->
<div class="card">
<div class="card-title">‚è∞ Alarm</div>
<input type="time" id="alarmTime">
<button onclick="setAlarm()">Save Alarm</button>
</div>

</div>

<audio id="tickSound" preload="auto">
<source src="https://assets.mixkit.co/sfx/preview/mixkit-click-1124.mp3">
</audio>
<audio id="music"></audio>

<script>
const days=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
let habits=8; let weekOffset=0;
let today=new Date(); today.setHours(0,0,0,0);

/* MUSIC */
let playlist=[
{name:"üî• Pump Up",url:"https://www.bensound.com/bensound-music/bensound-epic.mp3"},
{name:"‚ö° Beast Mode",url:"https://www.bensound.com/bensound-music/bensound-actionable.mp3"},
{name:"üéß Focus Boost",url:"https://www.bensound.com/bensound-music/bensound-funkyelement.mp3"},
{name:"üí• Motivation HIT",url:"https://www.bensound.com/bensound-music/bensound-energy.mp3"}
];

let curSong=+localStorage.getItem("song")||0;
let music=document.getElementById("music");
music.loop=false;
music.src=playlist[curSong].url;
music.volume=+localStorage.getItem("vol")||0.6;
document.getElementById("volumeControl").value=music.volume;
songName.innerText=playlist[curSong].name;

function toggleMusic(){music.paused?music.play():music.pause();}
function prevSong(){curSong=(curSong-1+playlist.length)%playlist.length; loadSong();}
function nextSong(){curSong=(curSong+1)%playlist.length; loadSong();}
function changeVolume(v){music.volume=v; localStorage.setItem("vol",v);}
function toggleLoop(){music.loop=!music.loop; event.target.innerText=`üîÅ Loop: ${music.loop?"On":"Off"}`;}
function loadSong(){
localStorage.setItem("song",curSong);
music.src=playlist[curSong].url;
songName.innerText=playlist[curSong].name;
music.play();
}

/* DARK */
if(localStorage.getItem("dark")==="true") document.body.classList.add("dark");
function toggleDark(){
document.body.classList.toggle("dark");
localStorage.setItem("dark",document.body.classList.contains("dark"));
}

/* PROFILE */
function saveProfile(){
let n=userName.value;if(n) localStorage.setItem("name",n);
let f=photoInput.files[0];
if(f){
let r=new FileReader();
r.onload=()=>{localStorage.setItem("pic",r.result); profilePic.src=r.result;}
r.readAsDataURL(f);
}
loadProfile();
}
function loadProfile(){
userNameShow.innerText="üë§ "+(localStorage.getItem("name")||"Your Name");
profilePic.src=localStorage.getItem("pic")||"";
updateStats(); updateStreak();
}

/* HABIT EDIT */
function editHabits(){
habitEditor.innerHTML="";
let saved=JSON.parse(localStorage.getItem("habitNames")||"[]");
for(let i=0;i<habits;i++){
habitEditor.innerHTML+=`<input id="h${i}" value="${saved[i]||"Habit "+(i+1)}">`;
}
habitEditor.innerHTML+=`<button onclick="saveHabits()">Save</button>`;
habitEditor.style.display="block";
}
function saveHabits(){
let arr=[];
for(let i=0;i<habits;i++) arr.push(document.getElementById("h"+i).value);
localStorage.setItem("habitNames",JSON.stringify(arr));
habitEditor.style.display="none";
render();
}

/* SOUND */
let soundReady=false;
function unlockSound(){
tickSound.play().then(()=>{
tickSound.pause();tickSound.currentTime=0;soundReady=true;
});
}

/* WATER & WEIGHT */
function saveWater(){localStorage.setItem("water",water.value);updateStats();}
function saveWeight(){localStorage.setItem("weight",weight.value);updateStats();}
function updateStats(){
statsShow.innerText=`üíß${localStorage.getItem("water")||0} | ‚öñÔ∏è${localStorage.getItem("weight")||0}`;
}

/* ALARM (FIXED REAL WORKING) */
function setAlarm(){
let t=alarmTime.value;
if(!t) return alert("Select a time!");
localStorage.setItem("alarm",t);
Notification.requestPermission();
alert("Alarm Set!");
}
setInterval(()=>{
let t=localStorage.getItem("alarm");if(!t) return;
let n=new Date();
let cur=n.getHours()+":"+String(n.getMinutes()).padStart(2,"0");
if(cur===t){alert("‚è∞ Wake Up!");}
},60000);

/* STREAK */
function updateStreak(){
let s=0; let d=new Date(today);
while(true){
let done=false;
for(let i=0;i<habits;i++){
let k=`${d.getFullYear()}-${d.getMonth()}_${d.getDate()}_${i}`;
if(localStorage.getItem(k)==="1") done=true;
}
if(!done) break;
s++;d.setDate(d.getDate()-1);
}
streakShow.innerText="üî• Streak: "+s;
localStorage.setItem("streak",s);
}

/* WEEK UPDATE */
function changeWeek(v){weekOffset+=v;render();}
function weekStart(d){let x=new Date(d);x.setDate(x.getDate()-x.getDay());return x;}

/* TABLE */
function render(){
let start=weekStart(new Date(today.getTime()+weekOffset*7*86400000));
monthYear.innerText=start.toLocaleString("default",{month:"long",year:"numeric"});
weekTitle.innerText=start.toDateString();

let names=JSON.parse(localStorage.getItem("habitNames")||"[]");
let row=`<th>Date</th><th>Day</th>`;
for(let i=0;i<habits;i++) row+=`<th>${names[i]||"Habit "+(i+1)}</th>`;
row+=`<th>%</th>`;
habitHeadRow.innerHTML=row;

chartBody.innerHTML="";
for(let i=0;i<7;i++){
let d=new Date(start); d.setDate(start.getDate()+i);
let isToday=d.toDateString()===today.toDateString();
let html=`<td>${d.getDate()}</td><td>${days[d.getDay()]}</td>`;
for(let h=0;h<habits;h++){
let key=`${d.getFullYear()}-${d.getMonth()}_${d.getDate()}_${h}`;
let ch=localStorage.getItem(key)==="1";
html+=`<td><input type="checkbox" ${ch?'checked':''}
${!isToday?'disabled':''} onclick="saveTick('${key}',this)"></td>`;
}
chartBody.innerHTML+=
`<tr class="${isToday?'today':''}">${html}<td class="per">0%</td></tr>`;
}
calcPercent();
}

function saveTick(k,el){
localStorage.setItem(k,el.checked?"1":"0");
if(soundReady){tickSound.currentTime=0; tickSound.play();}
updateStreak(); calcPercent();
}

function calcPercent(){
document.querySelectorAll(".per").forEach(per=>{
let row=per.parentNode;
let done=row.querySelectorAll("input:checked").length;
per.innerText=Math.round(done/habits*100)+"%";
});
}

/* INIT */
loadProfile(); render();
</script>

</body>
</html>

